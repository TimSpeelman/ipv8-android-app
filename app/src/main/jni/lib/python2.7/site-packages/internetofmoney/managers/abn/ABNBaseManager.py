from internetofmoney.managers.BaseManager import BaseManager
from internetofmoney.utils.profile import ProfileUtil


class ABNBaseManager(BaseManager):
    """
    This class implements the base manager used to communicate with the ABN AMRO server.
    """

    def __init__(self, database, cache_dir='cache'):
        super(ABNBaseManager, self).__init__(database, cache_dir=cache_dir)

        self.logged_in = False
        self.tool_id = None
        self.customer_number = None

    def get_abn_headers(self, service_version='v3', is_json=False, include_service_version=True):
        headers_dict = {
            'User-Agent': 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_3) AppleWebKit/602.4.8 (KHTML, like Gecko) '
                          'Version/10.0.3 Safari/602.4.8',
            'Connection': 'keep-alive',
            'Accept-Language': 'nl',
            'X-Requested-With': 'XMLHttpRequest'
        }

        if is_json:
            headers_dict['Content-Type'] = 'application/json'
        if include_service_version:
            headers_dict['x-aab-serviceversion'] = service_version

        return headers_dict

    def get_bank_name(self):
        return 'ABN'

    def get_bank_id(self):
        return 'ABNA'
